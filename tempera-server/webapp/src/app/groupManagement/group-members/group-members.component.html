<p-toast></p-toast>
<h1 class="text-3xl font-semibold text-center my-4">Members from Group {{groupName}}</h1>
<br>
<div class="mb-4">
  <input type="text" pInputText placeholder="Search" (input)="applyFilterMembers($event)" class="mr-2">

  <button type="button" pButton label="Add New Member" icon="pi pi-plus" (click)="addMemberDialog()" class="mr-2"></button>
</div>
<p-table [value]="filteredMembers" [paginator]="true" [rows]="10" responsiveLayout="scroll" [globalFilterFields]="['username', 'firstName', 'lastName']">
  <ng-template pTemplate="header">
    <tr>
      <th scope="col" pSortableColumn="username">Benutzername
        <p-sortIcon field="username"></p-sortIcon>
      </th>
      <th scope="col" pSortableColumn="firstName">Vorname
        <p-sortIcon field="firstName"></p-sortIcon>
      </th>
      <th scope="col" pSortableColumn="lastName">Nachname
        <p-sortIcon field="lastName"></p-sortIcon>
      </th>
      <th></th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-member>
    <tr>
      <td>{{member.username}}</td>
      <td>{{member.firstName}}</td>
      <td>{{member.lastName}}</td>
      <td>
        <button pButton type="button" label="Delete" icon="pi pi-times" (click)="deleteMember(member.username)"></button>
    </tr>
  </ng-template>
</p-table>
<p-dialog
  header="Add New Member"
  [(visible)]="displayAddDialog"
  [responsive]="true"
  [style]="{width: '50vw'}"
  >
  <div class="mb-4">
    <input type="text" pInputText placeholder="Search" (input)="applyFilterUsers($event)" class="mr-2">
    <button pButton type="button" label="Add Selected" icon="pi pi-check" (click)="addMembers()" class="p-mt-2"></button>
  </div>
  <p-table [value]="filteredUsers" [paginator]="true" [rows]="10" responsiveLayout="scroll" [(selection)]="selectedUsers">
    <ng-template pTemplate="header">
      <tr>
        <th></th>
        <th scope="col" pSortableColumn="username">Benutzername
          <p-sortIcon field="username"></p-sortIcon>
        </th>
        <th scope="col" pSortableColumn="firstName">Vorname
          <p-sortIcon field="firstName"></p-sortIcon>
        </th>
        <th scope="col" pSortableColumn="lastName">Nachname
          <p-sortIcon field="lastName"></p-sortIcon>
        </th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-user>
      <tr>
        <td>
          <p-tableCheckbox [value]="user" />
        </td>
        <td>{{user.username}}</td>
        <td>{{user.firstName}}</td>
        <td>{{user.lastName}}</td>
        <td>
        </td>
      </tr>
    </ng-template>
  </p-table>
</p-dialog>

